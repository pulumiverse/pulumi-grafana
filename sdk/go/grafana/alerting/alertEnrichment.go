// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package alerting

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumiverse/pulumi-grafana/sdk/v2/go/grafana/internal"
)

// Manages [Grafana Cloud Alert Enrichment](https://grafana.com/docs/grafana-cloud/alerting-and-irm/alerting/configure-notifications/alert-enrichment/).
//
// Alert enrichment is currently in private preview. Grafana Labs offers support on a best-effort basis, and breaking changes might occur prior to the feature being made generally available
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"encoding/json"
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumiverse/pulumi-grafana/sdk/v2/go/grafana/alerting"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			tmpJSON0, err := json.Marshal(map[string]interface{}{
//				"datasource": map[string]interface{}{
//					"type": "prometheus",
//					"uid":  "prometheus-uid-456",
//				},
//				"expr":          "rate(http_requests_total[5m])",
//				"refId":         "A",
//				"intervalMs":    1000,
//				"maxDataPoints": 43200,
//			})
//			if err != nil {
//				return err
//			}
//			json0 := string(tmpJSON0)
//			_, err = alerting.NewAlertEnrichment(ctx, "enrichment", &alerting.AlertEnrichmentArgs{
//				Metadata: &alerting.AlertEnrichmentMetadataArgs{
//					Uid: pulumi.String("test_enrichment"),
//				},
//				Spec: &alerting.AlertEnrichmentSpecArgs{
//					Title:       pulumi.String("Comprehensive alert enrichment"),
//					Description: pulumi.String("Demonstrates many enrichment steps and configurations"),
//					AlertRuleUids: pulumi.StringArray{
//						pulumi.String("alert-rule-1"),
//						pulumi.String("alert-rule-2"),
//					},
//					Receivers: pulumi.StringArray{
//						pulumi.String("webhook"),
//						pulumi.String("slack-critical"),
//					},
//					LabelMatchers: alerting.AlertEnrichmentSpecLabelMatcherArray{
//						&alerting.AlertEnrichmentSpecLabelMatcherArgs{
//							Type:  pulumi.String("="),
//							Name:  pulumi.String("severity"),
//							Value: pulumi.String("critical"),
//						},
//						&alerting.AlertEnrichmentSpecLabelMatcherArgs{
//							Type:  pulumi.String("=~"),
//							Name:  pulumi.String("team"),
//							Value: pulumi.String("alerting|alerting-team"),
//						},
//					},
//					AnnotationMatchers: alerting.AlertEnrichmentSpecAnnotationMatcherArray{
//						&alerting.AlertEnrichmentSpecAnnotationMatcherArgs{
//							Type:  pulumi.String("!="),
//							Name:  pulumi.String("runbook_url"),
//							Value: pulumi.String(""),
//						},
//					},
//					Steps: alerting.AlertEnrichmentSpecStepArray{
//						&alerting.AlertEnrichmentSpecStepArgs{
//							Assign: &alerting.AlertEnrichmentSpecStepAssignArgs{
//								Timeout: pulumi.String("30s"),
//								Annotations: pulumi.StringMap{
//									"priority":    pulumi.String("high"),
//									"runbook_url": pulumi.String("https://runbooks.grafana.com/alert-handling"),
//								},
//							},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							External: &alerting.AlertEnrichmentSpecStepExternalArgs{
//								Url: pulumi.String("https://some-api.grafana.com/alert-enrichment"),
//							},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							DataSource: &alerting.AlertEnrichmentSpecStepDataSourceArgs{
//								Timeout: pulumi.String("30s"),
//								LogsQuery: &alerting.AlertEnrichmentSpecStepDataSourceLogsQueryArgs{
//									DataSourceType: pulumi.String("loki"),
//									DataSourceUid:  pulumi.String("loki-uid-123"),
//									Expr:           pulumi.String("{job=\"my-app\"} |= \"error\""),
//									MaxLines:       pulumi.Int(5),
//								},
//							},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							DataSource: &alerting.AlertEnrichmentSpecStepDataSourceArgs{
//								Timeout: pulumi.String("30s"),
//								RawQuery: &alerting.AlertEnrichmentSpecStepDataSourceRawQueryArgs{
//									RefId:   pulumi.String("A"),
//									Request: pulumi.String(json0),
//								},
//							},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							Sift: &alerting.AlertEnrichmentSpecStepSiftArgs{},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							Explain: &alerting.AlertEnrichmentSpecStepExplainArgs{
//								Annotation: pulumi.String("ai_explanation"),
//							},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							AssistantInvestigations: &alerting.AlertEnrichmentSpecStepAssistantInvestigationsArgs{},
//						},
//						&alerting.AlertEnrichmentSpecStepArgs{
//							Conditional: &alerting.AlertEnrichmentSpecStepConditionalArgs{
//								If: &alerting.AlertEnrichmentSpecStepConditionalIfArgs{
//									LabelMatchers: alerting.AlertEnrichmentSpecStepConditionalIfLabelMatcherArray{
//										&alerting.AlertEnrichmentSpecStepConditionalIfLabelMatcherArgs{
//											Type:  pulumi.String("="),
//											Name:  pulumi.String("severity"),
//											Value: pulumi.String("critical"),
//										},
//									},
//								},
//								Then: &alerting.AlertEnrichmentSpecStepConditionalThenArgs{
//									Steps: alerting.AlertEnrichmentSpecStepConditionalThenStepArray{
//										&alerting.AlertEnrichmentSpecStepConditionalThenStepArgs{
//											Assign: &alerting.AlertEnrichmentSpecStepConditionalThenStepAssignArgs{
//												Annotations: pulumi.StringMap{
//													"escalation_level": pulumi.String("immediate"),
//												},
//											},
//										},
//										&alerting.AlertEnrichmentSpecStepConditionalThenStepArgs{
//											External: &alerting.AlertEnrichmentSpecStepConditionalThenStepExternalArgs{
//												Url: pulumi.String("https://irm.grafana.com/create-incident"),
//											},
//										},
//									},
//								},
//								Else: &alerting.AlertEnrichmentSpecStepConditionalElseArgs{
//									Steps: alerting.AlertEnrichmentSpecStepConditionalElseStepArray{
//										&alerting.AlertEnrichmentSpecStepConditionalElseStepArgs{
//											Assign: &alerting.AlertEnrichmentSpecStepConditionalElseStepAssignArgs{
//												Annotations: pulumi.StringMap{
//													"escalation_level": pulumi.String("standard"),
//												},
//											},
//										},
//									},
//								},
//							},
//						},
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
type AlertEnrichment struct {
	pulumi.CustomResourceState

	// The metadata of the resource.
	Metadata AlertEnrichmentMetadataPtrOutput `pulumi:"metadata"`
	// Options for applying the resource.
	Options AlertEnrichmentOptionsPtrOutput `pulumi:"options"`
	// The spec of the resource.
	Spec AlertEnrichmentSpecPtrOutput `pulumi:"spec"`
}

// NewAlertEnrichment registers a new resource with the given unique name, arguments, and options.
func NewAlertEnrichment(ctx *pulumi.Context,
	name string, args *AlertEnrichmentArgs, opts ...pulumi.ResourceOption) (*AlertEnrichment, error) {
	if args == nil {
		args = &AlertEnrichmentArgs{}
	}

	opts = internal.PkgResourceDefaultOpts(opts)
	var resource AlertEnrichment
	err := ctx.RegisterResource("grafana:alerting/alertEnrichment:AlertEnrichment", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAlertEnrichment gets an existing AlertEnrichment resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAlertEnrichment(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AlertEnrichmentState, opts ...pulumi.ResourceOption) (*AlertEnrichment, error) {
	var resource AlertEnrichment
	err := ctx.ReadResource("grafana:alerting/alertEnrichment:AlertEnrichment", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering AlertEnrichment resources.
type alertEnrichmentState struct {
	// The metadata of the resource.
	Metadata *AlertEnrichmentMetadata `pulumi:"metadata"`
	// Options for applying the resource.
	Options *AlertEnrichmentOptions `pulumi:"options"`
	// The spec of the resource.
	Spec *AlertEnrichmentSpec `pulumi:"spec"`
}

type AlertEnrichmentState struct {
	// The metadata of the resource.
	Metadata AlertEnrichmentMetadataPtrInput
	// Options for applying the resource.
	Options AlertEnrichmentOptionsPtrInput
	// The spec of the resource.
	Spec AlertEnrichmentSpecPtrInput
}

func (AlertEnrichmentState) ElementType() reflect.Type {
	return reflect.TypeOf((*alertEnrichmentState)(nil)).Elem()
}

type alertEnrichmentArgs struct {
	// The metadata of the resource.
	Metadata *AlertEnrichmentMetadata `pulumi:"metadata"`
	// Options for applying the resource.
	Options *AlertEnrichmentOptions `pulumi:"options"`
	// The spec of the resource.
	Spec *AlertEnrichmentSpec `pulumi:"spec"`
}

// The set of arguments for constructing a AlertEnrichment resource.
type AlertEnrichmentArgs struct {
	// The metadata of the resource.
	Metadata AlertEnrichmentMetadataPtrInput
	// Options for applying the resource.
	Options AlertEnrichmentOptionsPtrInput
	// The spec of the resource.
	Spec AlertEnrichmentSpecPtrInput
}

func (AlertEnrichmentArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*alertEnrichmentArgs)(nil)).Elem()
}

type AlertEnrichmentInput interface {
	pulumi.Input

	ToAlertEnrichmentOutput() AlertEnrichmentOutput
	ToAlertEnrichmentOutputWithContext(ctx context.Context) AlertEnrichmentOutput
}

func (*AlertEnrichment) ElementType() reflect.Type {
	return reflect.TypeOf((**AlertEnrichment)(nil)).Elem()
}

func (i *AlertEnrichment) ToAlertEnrichmentOutput() AlertEnrichmentOutput {
	return i.ToAlertEnrichmentOutputWithContext(context.Background())
}

func (i *AlertEnrichment) ToAlertEnrichmentOutputWithContext(ctx context.Context) AlertEnrichmentOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AlertEnrichmentOutput)
}

// AlertEnrichmentArrayInput is an input type that accepts AlertEnrichmentArray and AlertEnrichmentArrayOutput values.
// You can construct a concrete instance of `AlertEnrichmentArrayInput` via:
//
//	AlertEnrichmentArray{ AlertEnrichmentArgs{...} }
type AlertEnrichmentArrayInput interface {
	pulumi.Input

	ToAlertEnrichmentArrayOutput() AlertEnrichmentArrayOutput
	ToAlertEnrichmentArrayOutputWithContext(context.Context) AlertEnrichmentArrayOutput
}

type AlertEnrichmentArray []AlertEnrichmentInput

func (AlertEnrichmentArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AlertEnrichment)(nil)).Elem()
}

func (i AlertEnrichmentArray) ToAlertEnrichmentArrayOutput() AlertEnrichmentArrayOutput {
	return i.ToAlertEnrichmentArrayOutputWithContext(context.Background())
}

func (i AlertEnrichmentArray) ToAlertEnrichmentArrayOutputWithContext(ctx context.Context) AlertEnrichmentArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AlertEnrichmentArrayOutput)
}

// AlertEnrichmentMapInput is an input type that accepts AlertEnrichmentMap and AlertEnrichmentMapOutput values.
// You can construct a concrete instance of `AlertEnrichmentMapInput` via:
//
//	AlertEnrichmentMap{ "key": AlertEnrichmentArgs{...} }
type AlertEnrichmentMapInput interface {
	pulumi.Input

	ToAlertEnrichmentMapOutput() AlertEnrichmentMapOutput
	ToAlertEnrichmentMapOutputWithContext(context.Context) AlertEnrichmentMapOutput
}

type AlertEnrichmentMap map[string]AlertEnrichmentInput

func (AlertEnrichmentMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AlertEnrichment)(nil)).Elem()
}

func (i AlertEnrichmentMap) ToAlertEnrichmentMapOutput() AlertEnrichmentMapOutput {
	return i.ToAlertEnrichmentMapOutputWithContext(context.Background())
}

func (i AlertEnrichmentMap) ToAlertEnrichmentMapOutputWithContext(ctx context.Context) AlertEnrichmentMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AlertEnrichmentMapOutput)
}

type AlertEnrichmentOutput struct{ *pulumi.OutputState }

func (AlertEnrichmentOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**AlertEnrichment)(nil)).Elem()
}

func (o AlertEnrichmentOutput) ToAlertEnrichmentOutput() AlertEnrichmentOutput {
	return o
}

func (o AlertEnrichmentOutput) ToAlertEnrichmentOutputWithContext(ctx context.Context) AlertEnrichmentOutput {
	return o
}

// The metadata of the resource.
func (o AlertEnrichmentOutput) Metadata() AlertEnrichmentMetadataPtrOutput {
	return o.ApplyT(func(v *AlertEnrichment) AlertEnrichmentMetadataPtrOutput { return v.Metadata }).(AlertEnrichmentMetadataPtrOutput)
}

// Options for applying the resource.
func (o AlertEnrichmentOutput) Options() AlertEnrichmentOptionsPtrOutput {
	return o.ApplyT(func(v *AlertEnrichment) AlertEnrichmentOptionsPtrOutput { return v.Options }).(AlertEnrichmentOptionsPtrOutput)
}

// The spec of the resource.
func (o AlertEnrichmentOutput) Spec() AlertEnrichmentSpecPtrOutput {
	return o.ApplyT(func(v *AlertEnrichment) AlertEnrichmentSpecPtrOutput { return v.Spec }).(AlertEnrichmentSpecPtrOutput)
}

type AlertEnrichmentArrayOutput struct{ *pulumi.OutputState }

func (AlertEnrichmentArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AlertEnrichment)(nil)).Elem()
}

func (o AlertEnrichmentArrayOutput) ToAlertEnrichmentArrayOutput() AlertEnrichmentArrayOutput {
	return o
}

func (o AlertEnrichmentArrayOutput) ToAlertEnrichmentArrayOutputWithContext(ctx context.Context) AlertEnrichmentArrayOutput {
	return o
}

func (o AlertEnrichmentArrayOutput) Index(i pulumi.IntInput) AlertEnrichmentOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *AlertEnrichment {
		return vs[0].([]*AlertEnrichment)[vs[1].(int)]
	}).(AlertEnrichmentOutput)
}

type AlertEnrichmentMapOutput struct{ *pulumi.OutputState }

func (AlertEnrichmentMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AlertEnrichment)(nil)).Elem()
}

func (o AlertEnrichmentMapOutput) ToAlertEnrichmentMapOutput() AlertEnrichmentMapOutput {
	return o
}

func (o AlertEnrichmentMapOutput) ToAlertEnrichmentMapOutputWithContext(ctx context.Context) AlertEnrichmentMapOutput {
	return o
}

func (o AlertEnrichmentMapOutput) MapIndex(k pulumi.StringInput) AlertEnrichmentOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *AlertEnrichment {
		return vs[0].(map[string]*AlertEnrichment)[vs[1].(string)]
	}).(AlertEnrichmentOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AlertEnrichmentInput)(nil)).Elem(), &AlertEnrichment{})
	pulumi.RegisterInputType(reflect.TypeOf((*AlertEnrichmentArrayInput)(nil)).Elem(), AlertEnrichmentArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AlertEnrichmentMapInput)(nil)).Elem(), AlertEnrichmentMap{})
	pulumi.RegisterOutputType(AlertEnrichmentOutput{})
	pulumi.RegisterOutputType(AlertEnrichmentArrayOutput{})
	pulumi.RegisterOutputType(AlertEnrichmentMapOutput{})
}
